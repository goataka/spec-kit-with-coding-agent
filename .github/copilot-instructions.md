# GitHub Copilot カスタムインストラクション

このドキュメントに記載された指示に加えて、以下のリンク先ドキュメントの内容も指示として考慮してください:
- [Agent開発ガイドライン](./agents/AGENTS.md) - Spec-kitワークフローの詳細
- [プロジェクト憲法](../memory/constitution.md) - プロジェクトの核心原則

## 言語ポリシー

このリポジトリでは、以下の言語ポリシーを遵守してください:

### 日本語を使用する箇所

1. **PRのタイトルとサマリー**: すべてのPull Requestのタイトルと説明は日本語で記述してください
2. **コミットメッセージ**: すべてのコミットメッセージは日本語で記述してください
3. **コードレビューコメント**: レビューコメントは日本語で記述してください
4. **Issue**: Issueのタイトルと説明は日本語で記述してください
5. **仕様書とドキュメント**: spec.md、plan.md、tasks.mdなど、すべての仕様書とドキュメントは日本語で記述してください
6. **Agentとのやり取り**: GitHub Copilot Agentとのすべてのやり取りは日本語で行ってください

### 英語を使用する箇所

1. **コード**: 変数名、関数名、クラス名、コメントは英語で記述してください
2. **技術用語**: 技術的な固有名詞はそのまま英語を使用してください（例: OIDC, CDK, CloudFormation）

## コミットID提示のルール

エージェントがコメントでコミットIDを提示する際は、必ずGitHubへのリンクを付ける:

**形式**:
```
Commit: [短縮SHA](https://github.com/goataka/spec-kit-with-coding-agent/commit/完全SHA)
```

**例**:
```
Commit: [be9f233](https://github.com/goataka/spec-kit-with-coding-agent/commit/be9f233)
```

**理由**:
- ユーザーがワンクリックでコミット内容を確認可能
- コードレビューの効率化
- 変更履歴の追跡性向上

## 変更時の確認手順

### コード変更の場合
- ビルド確認: `npm run build`
- テスト実行: `npm test`
- Lint実行（該当する場合）
- 変更が意図した箇所のみに限定されているか確認

### ドキュメント変更の場合
- Markdownフォーマットチェック
- リンク切れチェック
- 日本語/英語の言語ポリシーに準拠しているか確認

### Mermaid図の変更の場合
- 描画エラーがないか確認
- ブラウザまたはエディタでプレビュー確認

### 反復確認の原則
- 変更対象の漏れがないか、全ファイルを確認
- 類似パターンの箇所を検索し、一貫性を確保
- 変更後に影響範囲を再チェック

## Spec-Kitワークフロー

このプロジェクトでは spec-kit を使用した開発フローを採用しています:

1. `/specify` - 機能仕様の作成
2. `/plan` - 技術計画の作成
3. `/tasks` - 実装タスクの作成
4. `/implement` - タスクの実装

詳細は [Agent開発ガイドライン](./agents/AGENTS.md) を参照してください。

## セキュリティ要件

- IAM権限は特定のリソースパターンにスコープし、ワイルドカード(`*`)の使用を避けてください
- OIDC信頼ポリシーはリポジトリ固有のGitHub Actionsに制限してください
- AWSマネージドポリシー（PowerUserAccessなど）の使用は最小限にし、必要な権限のみを付与してください

## コスト最適化

- CloudWatch アラームなど、コストがかかる監視機能は初期段階では実装しないでください
- DynamoDB は On-Demand 課金モデルを使用してください
- 無料枠の範囲で利用できる基本的なメトリクスのみを使用してください

